<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="Canvas.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="./../lib/m4.js"></script>
    <script src="./../lib/twgl-full.min4.js"></script>
    <script src="./../lib/utils.js"></script>
    <script src="./../lib/setup.js"></script>
    <script src="./../lib/ourUtils.js"></script>
    <script src="./../gameModel.js"></script>
    <script src="Canvas.js"></script>
    <script src="./../lib/spaces.js"></script>
    <script src="./../lib/input.js"></script>
    
    <link href="./textures/prova.png" rel="shortcut icon" type="image/png">

    <title>Arkanoid</title>
</head>
<body>
    <div class="container-fluid">
        
        <div id="container-row" class="row mt-3">
            <canvas id="arkanoid-canvas"></canvas>
            <script>
                var canvas = document.getElementById("arkanoid-canvas");
                const gl = canvas.getContext("webgl2");
                setup.init();


                map = [];
                row = 10;
                column = 9;
                for (x = 0; x < row; x++) map[x] = [];
                for (x = 0; x < row; x++) for (y = 0; y < column; y++) map[x][y] = 0;
                for (x = Math.floor(row/2); x < row-Math.floor(row/4); x++) for (y = 0; y < column; y++) map[x][y] = 1;
                stringa ="[";
                for (x=0; x < column; x++){
                    stringa += "[";
                    for (y = 0; y < row; y++){
                        stringa += map[y][x] + ","
                    }
                    stringa += "],\n"
                }
                stringa += "]";
                console.log(stringa);
                map = [[0,0,0,0,0,0,0,0,0,0,],
                    [0,0,0,0,0,0,0,0,0,0,],
                    [0,0,0,0,0,0,0,0,0,0,],
                    [0,0,0,0,0,1,1,1,0,0,],
                    [0,0,0,0,0,1,1,1,0,0,],
                    [0,0,0,0,0,1,1,1,0,0,],
                    [0,0,0,0,0,0,0,0,0,0,],
                    [0,0,0,0,0,0,0,0,0,0,],
                    [0,0,0,0,0,0,0,0,0,0,],
                    ]
                map2 = [
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,],
                    [0,0,0,0,0,2,2,2,0,0,0,0,0,],
                    [0,0,0,0,0,0,0,2,2,0,0,0,0,],
                    [0,0,0,0,0,2,2,2,2,2,0,3,0,],
                    [0,0,0,0,2,0,2,2,4,2,3,0,0,],
                    [0,0,0,0,2,0,2,2,2,2,0,0,0,],
                    [0,0,0,0,0,0,2,2,2,2,0,0,0,],
                    [0,0,0,0,2,0,2,2,2,2,0,0,0,],
                    [0,0,0,0,2,0,2,2,4,2,3,0,0,],
                    [0,0,0,0,0,2,2,2,2,2,0,3,0,],
                    [0,0,0,0,0,0,0,2,2,0,0,0,0,],
                    [0,0,0,0,0,2,2,2,0,0,0,0,0,],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,],
                ];
                map3 = []
                map2.forEach(e => {
                    var column = []
                    for (let i = 0; i < e.length; i++) {
                        const num = e[i];
                        column.push(num,num);
                    }
                    map3.push(column)
                });

                var game = new Arkanoid(map3,0.025,0.05);
                game.play()
            </script>
            
            <div id="ui-container">
                <p class="ui-score">Score: 0</p>
                <p class="ui-lives">Lives:
                    <i id="life-1" class="fa fa-heart"></i>
                    <i id="life-2" class="fa fa-heart"></i>
                    <i id="life-3" class="fa fa-heart"></i>
                </p>
            </div>

            <div id="menu" class="container-fluid">
                <p class="menu-text"><a id="resume" href="#">Resume</a></p>
                <p class="menu-text"><a id="settings" href="#">Settings</a></p>
                <p class="menu-text"><a id="quit-menu" href="#">Quit</a></p>
            </div>

            <div id="settings-screen" class="container-fluid">
                <h1 class="settings-title">Settings</h1>
                <p class="menu-text"><a id="back-to-menu" href="#">Back</a></p>
            </div>
            
            <div id="victory-screen" class="container-fluid">
                <h1 class="result-msg">Congratulations: you won!</h1>
                <p id="victory-score" class="menu-text">Your score</p>
                <p class="menu-text"><a class="restart-game" href="#">Play again</a></p>
            </div>

            <div id="lost-screen" class="container-fluid">
                <h1 class="result-msg">You lost</h1>
                <p class="menu-text"><a class="restart-game" href="#">Play again</a></p>
            </div>
        </div>
        
    </div>
</body>
</html>